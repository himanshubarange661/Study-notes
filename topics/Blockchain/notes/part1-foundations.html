<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>Blockchain — Part 1: Foundations (Infographic)</title>

  <!-- Minimal reset + fonts -->
  <style>
    :root{
      --bg: #0f1724;
      --panel: #0b1220;
      --muted: #9aa6b2;
      --accent: #2dd4bf;
      --card: #071022;
      --text: #e6eef6;
      --maxWidth: 1200; /* design width in px */
      --maxHeight: 780; /* design height in px */
      --scale: 1;
    }
    *{box-sizing:border-box}
    html,body{height:100%;margin:0;background:linear-gradient(180deg,#071021 0%, #041022 100%);color:var(--text);font-family:Inter, ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial}
    a{color:var(--accent)}
    /* full-viewport canvas wrapper */
    .page {
      height:100vh; width:100vw;
      display:flex;align-items:center;justify-content:center;
      padding:18px;
    }

    /* frame that holds the infographic content (centered) */
    .viewer {
      width: min(100vw - 36px, calc(var(--maxWidth) * var(--scale) * 1px));
      height: min(100vh - 36px, calc(var(--maxHeight) * var(--scale) * 1px));
      display:flex;align-items:center;justify-content:center;
      background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
      border-radius:14px; box-shadow: 0 10px 40px rgba(2,6,23,0.7);
      overflow:hidden; position:relative;
    }

    /* the actual content area — fixed design size, scaled with CSS variable --scale */
    .canvas {
      width: calc(var(--maxWidth) * 1px);
      height: calc(var(--maxHeight) * 1px);
      transform-origin: 50% 50%;
      transform: scale(var(--scale));
      transition: transform 160ms linear;
      background: linear-gradient(180deg, rgba(10,18,30,0.9), rgba(5,10,18,0.9));
      border-radius:12px;
      padding:32px;
      box-shadow: inset 0 1px 0 rgba(255,255,255,0.02);
      display:grid;
      grid-template-columns: 340px 1fr 300px;
      grid-template-rows: auto 1fr;
      gap:20px;
      color:var(--text);
    }

    /* header */
    .title {
      grid-column: 1 / -1;
      display:flex;align-items:center;gap:18px;
    }
    .logo {
      width:64px;height:64px;border-radius:10px;background:linear-gradient(180deg,var(--accent),#06b6d4);
      display:flex;align-items:center;justify-content:center;font-weight:700;color:#012; font-size:22px;
      box-shadow: 0 4px 18px rgba(30,40,50,0.55);
    }
    .title h1{margin:0;font-size:1.55rem;letter-spacing:-0.6px}
    .title p{margin:0;color:var(--muted);font-size:0.95rem}

    /* left column: problem & cost of central trust */
    .left {
      background: linear-gradient(180deg, rgba(255,255,255,0.01), rgba(255,255,255,0.00));
      border-radius:10px;padding:18px;border:1px solid rgba(255,255,255,0.03);
      box-shadow: 0 6px 20px rgba(2,6,23,0.4);
      font-size:0.95rem;
    }
    .left h3{margin-top:0;margin-bottom:8px}
    .left .callout{
      margin:12px 0;padding:12px;border-radius:10px;background:linear-gradient(180deg, rgba(34,197,94,0.06), rgba(34,197,94,0.02));
      border:1px solid rgba(34,197,94,0.08); color:#dff7ee;font-weight:600
    }

    /* center: the chain diagram and cryptography visuals */
    .center {
      display:flex;flex-direction:column;gap:14px;
      padding:12px;border-radius:10px;border:1px solid rgba(255,255,255,0.03);
      background: linear-gradient(180deg, rgba(255,255,255,0.015), rgba(255,255,255,0.005));
    }

    .chain {
      display:flex;align-items:center;gap:12px;justify-content:center;padding:8px;
      background:linear-gradient(180deg, rgba(0,0,0,0.12), rgba(255,255,255,0.01));
      border-radius:10px;
    }
    .block {
      width:150px;padding:10px;border-radius:8px;background:linear-gradient(180deg,#06202b,#052034);
      border: 1px solid rgba(255,255,255,0.04); box-shadow: 0 6px 24px rgba(0,0,0,0.45);
      color:var(--text); font-size:0.86rem;
    }
    .block .h{font-size:0.72rem;color:var(--muted);margin-bottom:8px}
    .block .tx{font-weight:600}

    .diagram {
      display:flex;gap:14px;flex-wrap:wrap;align-items:center;justify-content:center;padding:6px;
    }

    /* right column: summary and controls */
    .right {
      padding:18px;border-radius:10px;border:1px solid rgba(255,255,255,0.03);
      background:linear-gradient(90deg, rgba(255,255,255,0.01), rgba(255,255,255,0.00));
      font-size:0.95rem;
      display:flex;flex-direction:column;gap:12px;
    }
    .right h4{margin:0}
    .badge {display:inline-block;padding:6px 10px;border-radius:999px;background:rgba(255,255,255,0.03);color:var(--muted);font-size:0.85rem}

    /* footer text */
    .footer {grid-column:1 / -1;color:var(--muted);font-size:0.9rem;padding-top:6px}

    /* zoom controls overlay */
    .controls {
      position:absolute; right:12px; top:12px; display:flex;gap:8px;
      background:rgba(2,6,23,0.5); border-radius:10px; padding:6px; backdrop-filter: blur(6px);
    }
    .controls button {
      background:transparent;border:1px solid rgba(255,255,255,0.06); color:var(--text); padding:8px 10px;border-radius:8px;
      cursor:pointer;font-weight:600;
    }
    .controls button:active{transform:translateY(1px)}

    /* responsive: collapse right column under center on narrow screens */
    @media (max-width:900px){
      .canvas{grid-template-columns:1fr; grid-template-rows:auto 1fr auto;}
      .left{order:1}
      .center{order:2}
      .right{order:3}
    }

    /* small print & accessibility */
    .muted{color:var(--muted);font-size:0.9rem}
    .k{background:rgba(255,255,255,0.03);padding:4px 8px;border-radius:6px;font-weight:700}
  </style>
</head>
<body>
  <div class="page">
    <div class="viewer" id="viewer">
      <div class="canvas" id="canvas" role="region" aria-label="Blockchain infographic">

        <div class="title">
          <div class="logo">BC</div>
          <div>
            <h1>Blockchain — Part 1: Foundations</h1>
            <p>From first principles: why a distributed ledger exists, the role of cryptography, and the consensus challenge.</p>
          </div>
        </div>

        <div class="left">
          <h3>Origin — A problem of trust</h3>
          <p>Before banks and centralized systems, private ledgers were unreliable: Alice and Bob can keep different records. The core question: <strong>how can independent actors agree on a shared version of truth?</strong></p>

          <h4>Centralized solution</h4>
          <p class="muted">Banks, notaries and servers act as single authorities — they provide finality but concentrate power and risk.</p>

          <div class="callout">
            <div style="font-size:0.95rem">Cost of central trust:</div>
            <ul style="margin:8px 0 0 18px; padding:0; color:#dff7ee">
              <li>Alter history or freeze accounts</li>
              <li>Require fees and gate access</li>
              <li>Single point of failure</li>
            </ul>
          </div>

          <h4>The first principle</h4>
          <p><strong>Can we build a shared system of record that no one can unilaterally control — yet everyone can trust?</strong></p>
        </div>

        <div class="center">
          <div style="display:flex;justify-content:space-between;align-items:center">
            <div><strong>Ledger & rules</strong><div class="muted">A ledger is a list of events; protocol enforces valid writes and ordering.</div></div>
            <div class="badge">Identity · Integrity · Agreement · Incentives</div>
          </div>

          <div class="chain" aria-hidden="true" title="hash-linked blocks example">
            <div class="block">
              <div class="h">Block 1</div>
              <div class="tx">Alice → Bob : 5</div>
              <div style="font-size:0.72rem;color:var(--muted);margin-top:8px">hash: 2cf24d…</div>
            </div>
            <div style="color:var(--muted)">→</div>
            <div class="block">
              <div class="h">Block 2</div>
              <div class="tx">Bob → Carol : 2</div>
              <div style="font-size:0.72rem;color:var(--muted);margin-top:8px">prev: 2cf24d…</div>
            </div>
            <div style="color:var(--muted)">→</div>
            <div class="block">
              <div class="h">Block 3</div>
              <div class="tx">Carol → Dave : 1</div>
              <div style="font-size:0.72rem;color:var(--muted);margin-top:8px">prev: 9b56fd…</div>
            </div>
          </div>

          <div class="diagram" aria-hidden="true">
            <div style="min-width:260px">
              <h4 style="margin:0 0 6px 0">Hash functions</h4>
              <div class="muted">Digital fingerprints: small, irreversible, collision-resistant.</div>
            </div>
            <div style="min-width:260px">
              <h4 style="margin:0 0 6px 0">Digital signatures</h4>
              <div class="muted">Proof of ownership: private key signs; public key verifies.</div>
            </div>
            <div style="min-width:260px">
              <h4 style="margin:0 0 6px 0">Hash linking</h4>
              <div class="muted">Blocks embed previous hashes → tamper-evidence.</div>
            </div>
          </div>

          <div style="padding:8px;border-radius:10px;background:linear-gradient(180deg, rgba(255,255,255,0.01), rgba(255,255,255,0.005));font-size:0.92rem">
            <strong>Consensus</strong> — the network must agree on which block becomes canonical. Simple majority voting fails in open networks due to Sybil attacks; we therefore need mechanisms (PoW, PoS) that make participation costly or tied to stake.
          </div>
        </div>

        <div class="right">
          <h4>Design Checklist</h4>
          <ul style="margin:6px 0 0 18px;padding:0;color:var(--muted)">
            <li><strong>Shared state:</strong> who owns what</li>
            <li><strong>Transition rules:</strong> valid transactions only</li>
            <li><strong>Ordering:</strong> consistent global order</li>
            <li><strong>Fraud prevention:</strong> cryptography + economics</li>
          </ul>

          <div style="padding-top:6px">
            <h4 style="margin:0 0 6px 0">Product lens</h4>
            <div class="muted">Every design choice trades off decentralization, security, scalability, usability, and economics.</div>
          </div>

          <div style="margin-top:auto">
            <h4 style="margin:0 0 6px 0">Learnings</h4>
            <ol style="margin-left:18px;color:var(--muted)">
              <li>Trust replaced by math (hashes & signatures)</li>
              <li>Agreement needs economically meaningful participation</li>
              <li>Bitcoin assembled these parts into a working system</li>
            </ol>
          </div>
        </div>

        <div class="footer">
          <strong>Next:</strong> <span class="muted">Part 2 — The Structure of the Ledger (blocks, transactions, Merkle trees, UTXO vs Account)</span>
        </div>

        <!-- controls -->
        <div class="controls" id="controls" aria-hidden="false">
          <button id="zoomOut" title="Zoom out">−</button>
          <button id="fit" title="Fit to screen">Fit</button>
          <button id="zoomIn" title="Zoom in">+</button>
        </div>

      </div>
    </div>
  </div>

  <!-- JS: fit-to-view, zoom controls, wheel & pinch support -->
  <script>
    (function(){
      const canvas = document.getElementById('canvas');
      const viewer = document.getElementById('viewer');
      const fitBtn = document.getElementById('fit');
      const zoomInBtn = document.getElementById('zoomIn');
      const zoomOutBtn = document.getElementById('zoomOut');

      // design dimensions (must match CSS root variables)
      const DPW = Number(getComputedStyle(document.documentElement).getPropertyValue('--maxWidth').trim());
      const DPH = Number(getComputedStyle(document.documentElement).getPropertyValue('--maxHeight').trim());

      // scale state
      let scale = 1;
      let minScale = 0.25;
      let maxScale = 4;

      // update CSS variable
      function setScale(s){
        scale = Math.max(minScale, Math.min(maxScale, s));
        document.documentElement.style.setProperty('--scale', scale);
      }

      // compute fit-to-view scale to show entire canvas inside viewer (accounting viewer padding)
      function computeFitScale(){
        const vw = viewer.clientWidth;
        const vh = viewer.clientHeight;
        const s = Math.min( vw / DPW, vh / DPH );
        // clamp a bit
        return Math.max(0.25, Math.min(2.5, s));
      }

      // initial fit on load
      function fit(){
        setScale(computeFitScale());
      }

      // buttons
      zoomInBtn.addEventListener('click', ()=> setScale(scale * 1.15));
      zoomOutBtn.addEventListener('click', ()=> setScale(scale / 1.15));
      fitBtn.addEventListener('click', fit);

      // handle wheel: ctrl+wheel or wheel while hovered => zoom, otherwise scroll viewer
      viewer.addEventListener('wheel', (ev)=>{
        // if ctrlKey OR altKey OR shiftKey, use wheel to zoom; otherwise don't hijack native behavior
        if (ev.ctrlKey || ev.metaKey){
          ev.preventDefault();
          const delta = -ev.deltaY;
          const factor = 1 + (delta > 0 ? 0.08 : -0.08);
          setScale(scale * factor);
        }
      }, {passive:false});

      // Pointer-based pinch support (two pointers)
      let pointers = new Map();
      let lastDistance = null;

      viewer.addEventListener('pointerdown', (e)=>{
        pointers.set(e.pointerId, {x:e.clientX, y:e.clientY});
        viewer.setPointerCapture?.(e.pointerId);
      });

      viewer.addEventListener('pointermove', (e)=>{
        if (!pointers.has(e.pointerId)) return;
        pointers.set(e.pointerId, {x:e.clientX, y:e.clientY});

        if (pointers.size === 2){
          // compute distance between two pointers
          const pts = Array.from(pointers.values());
          const dx = pts[0].x - pts[1].x;
          const dy = pts[0].y - pts[1].y;
          const dist = Math.hypot(dx, dy);
          if (lastDistance != null){
            const factor = dist / lastDistance;
            setScale(scale * factor);
          }
          lastDistance = dist;
        }
      });

      function clearPointers(e){
        pointers.delete(e.pointerId);
        if (pointers.size < 2) lastDistance = null;
      }
      viewer.addEventListener('pointerup', clearPointers);
      viewer.addEventListener('pointercancel', clearPointers);
      viewer.addEventListener('pointerout', clearPointers);
      viewer.addEventListener('pointerleave', clearPointers);

      // keyboard shortcuts
      window.addEventListener('keydown', (e)=>{
        if (e.key === '+' || (e.key === '=' && e.ctrlKey)) { setScale(scale * 1.15); e.preventDefault(); }
        if (e.key === '-' || (e.key === '_' && e.ctrlKey)) { setScale(scale / 1.15); e.preventDefault(); }
        if (e.key === '0' && e.ctrlKey) { fit(); e.preventDefault(); }
      });

      // on resize refit if current scale is near the fit scale (so users who didn't change zoom still see fit)
      let lastFit = computeFitScale();
      window.addEventListener('resize', ()=>{
        const currentFit = computeFitScale();
        // if scale is within 10% of previous fit, update
        if (Math.abs(scale - lastFit) / Math.max(0.001, lastFit) < 0.12){
          setScale(currentFit);
        }
        lastFit = currentFit;
      });

      // initial
      fit();

      // accessibility: allow Home/End to reset/focus
      document.addEventListener('visibilitychange', ()=> { if (!document.hidden) fit(); });

    })();
  </script>
</body>
</html>
